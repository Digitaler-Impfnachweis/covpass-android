class LibConfig {
    Boolean kotlinExplicitApiMode = false
}

ext.kotlinLibrary = { args = [:] ->
    apply plugin: 'java-library'
    apply plugin: 'kotlin'

    LibConfig config = new LibConfig(args)

    if (config.kotlinExplicitApiMode) {
        kotlin {
            explicitApi()
        }
    }

    compileKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }

    compileTestKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }

    // Behave like Android
    task testDebugUnitTest(type: Test, dependsOn: ['test'], group: 'verification')
}
